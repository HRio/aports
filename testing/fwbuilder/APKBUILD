# Contributor: Henrik Riomar <henrik.riomar@gmail.com>
# Maintainer:
pkgname=fwbuilder
pkgver=5.3.7
pkgrel=0
pkgdesc="GUI firewall management application"
url="https://github.com/fwbuilder/fwbuilder"
arch="all"
license="GPL-2.0-or-later"
makedepends="automake autoconf libtool libxml2-dev libxslt-dev net-snmp-dev qt5-qtbase-dev qt5-qttools-dev"
source="${pkgname}-${pkgver}.tar.gz::https://github.com/$pkgname/$pkgname/archive/v${pkgver}.tar.gz"
builddir="$srcdir/$pkgname-$pkgver"

prepare() {
	default_prepare
	cd "$builddir"
	export PATH="$PATH:/usr/lib/qt5/bin"
	CPPFLAGS="$CPPFLAGS -I/usr/include/QtWidgets" ./autogen.sh --prefix=/usr
}

build() {
	cd "$builddir"
	make
}

check() {
	cd "$builddir"
	export PATH="$PATH:/usr/lib/qt5/bin"
	make tests
}

package() {
	cd "$builddir"
	make INSTALL_ROOT="$pkgdir" install
}

sha512sums="d6504ddab17e80cb332f005b6bbb16c15a7b4735361733f0e0437cb94059a5c9039e563be6e0e8d328954db2416b2c0bdbb8afa36cd946f61e7c7edaee47453b  fwbuilder-5.3.7.tar.gz"
